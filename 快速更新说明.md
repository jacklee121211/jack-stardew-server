# å¿«é€Ÿæ›´æ–° entrypoint.sh è¯´æ˜

## åŸç†

é€šè¿‡å°† `entrypoint.sh` ä½œä¸º volume æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œä¿®æ”¹è„šæœ¬ååªéœ€é‡å¯å®¹å™¨å³å¯ç”Ÿæ•ˆï¼Œ**æ— éœ€é‡æ–°æ„å»º Docker é•œåƒ**ã€‚

è¿™å¤§å¤§åŠ å¿«äº†å¼€å‘å’Œè°ƒè¯•é€Ÿåº¦ï¼Œé¿å…äº†æ¯æ¬¡éƒ½è¦é‡æ–°æ„å»ºé•œåƒçš„ç­‰å¾…æ—¶é—´ã€‚

## ä½¿ç”¨æ–¹æ³•

### 1. ä¿®æ”¹ entrypoint.sh

ç¼–è¾‘ `docker/scripts/entrypoint.sh` æ–‡ä»¶ï¼š

```bash
# åœ¨æœ¬åœ°æˆ–æœåŠ¡å™¨ä¸Š
nano docker/scripts/entrypoint.sh
# æˆ–ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨
```

### 2. ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™

```bash
chmod +x docker/scripts/entrypoint.sh
```

### 3. é‡å¯å®¹å™¨ï¼ˆæ— éœ€é‡å»ºé•œåƒï¼‰

```bash
# æ–¹æ³•ä¸€ï¼šä½¿ç”¨ docker compose
docker compose restart stardew-server

# æ–¹æ³•äºŒï¼šåœæ­¢åå¯åŠ¨ï¼ˆå¦‚æœ restart ä¸ç”Ÿæ•ˆï¼‰
docker compose stop stardew-server
docker compose start stardew-server

# æ–¹æ³•ä¸‰ï¼šå®Œå…¨é‡å¯ï¼ˆæ¨èï¼Œç¡®ä¿æ–°è„šæœ¬ç”Ÿæ•ˆï¼‰
docker compose down
docker compose up -d
```

### 4. æŸ¥çœ‹æ—¥å¿—ç¡®è®¤

```bash
docker compose logs -f stardew-server
```

## é…ç½®è¯´æ˜

åœ¨ `docker-compose.yml` ä¸­ï¼Œå·²æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```yaml
volumes:
  # ... å…¶ä»–æŒ‚è½½ ...
  # Mount entrypoint.sh for hot-reload (no rebuild needed)
  # æŒ‚è½½ entrypoint.sh ä»¥ä¾¿çƒ­æ›´æ–°ï¼ˆæ— éœ€é‡å»ºé•œåƒï¼‰
  - ./docker/scripts/entrypoint.sh:/home/steam/entrypoint.sh:ro
```

- `ro` = åªè¯»æ¨¡å¼ï¼Œé˜²æ­¢å®¹å™¨å†…æ„å¤–ä¿®æ”¹
- æŒ‚è½½ä¼šè¦†ç›–é•œåƒä¸­çš„ `entrypoint.sh`

## ä¼˜åŠ¿

âœ… **å¿«é€Ÿè¿­ä»£** - ä¿®æ”¹åç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€ç­‰å¾…æ„å»º  
âœ… **èŠ‚çœæ—¶é—´** - è·³è¿‡ Docker é•œåƒæ„å»ºï¼ˆé€šå¸¸éœ€è¦å‡ åˆ†é’Ÿï¼‰  
âœ… **èŠ‚çœå¸¦å®½** - æ— éœ€ä¸Šä¼ /ä¸‹è½½æ•´ä¸ªé•œåƒ  
âœ… **è°ƒè¯•æ–¹ä¾¿** - å¿«é€Ÿæµ‹è¯•ä¸åŒçš„é…ç½®å’Œä¿®å¤  

## æ³¨æ„äº‹é¡¹

âš ï¸ **é¦–æ¬¡éƒ¨ç½²** - å¦‚æœä¿®æ”¹äº† Dockerfile ä¸­çš„å…¶ä»–å†…å®¹ï¼ˆå¦‚ä¾èµ–å®‰è£…ï¼‰ï¼Œä»éœ€è¦é‡æ–°æ„å»ºé•œåƒ

âš ï¸ **æƒé™é—®é¢˜** - ç¡®ä¿æœ¬åœ° `docker/scripts/entrypoint.sh` æœ‰æ‰§è¡Œæƒé™ï¼š
```bash
chmod +x docker/scripts/entrypoint.sh
```

âš ï¸ **æ–‡ä»¶åŒæ­¥** - åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨æ—¶ï¼Œä¿®æ”¹åéœ€è¦ `git push` ç„¶å `git pull`ï¼Œæˆ–ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šç¼–è¾‘

## æœåŠ¡å™¨ç«¯å¿«é€Ÿæ›´æ–°æµç¨‹

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
cd /jack-stardew-server
git pull origin main

# 2. ç¡®ä¿æ‰§è¡Œæƒé™
chmod +x docker/scripts/entrypoint.sh

# 3. é‡å¯å®¹å™¨ï¼ˆæ— éœ€ buildï¼‰
docker compose restart stardew-server

# 4. æŸ¥çœ‹æ—¥å¿—
docker compose logs -f stardew-server
```

## å®Œæ•´æ›´æ–°æµç¨‹ï¼ˆå¯¹æ¯”ï¼‰

### æ—§æ–¹æ³•ï¼ˆæ¯æ¬¡éƒ½è¦æ„å»ºï¼‰
```bash
git pull origin main
docker compose down
docker compose build --no-cache  # â±ï¸ éœ€è¦å‡ åˆ†é’Ÿ
docker compose up -d
```

### æ–°æ–¹æ³•ï¼ˆåªæ›´æ–° entrypoint.shï¼‰
```bash
git pull origin main
chmod +x docker/scripts/entrypoint.sh
docker compose restart stardew-server  # âš¡ å‡ ç§’é’Ÿ
```

èŠ‚çœæ—¶é—´ï¼š**å‡ åˆ†é’Ÿ â†’ å‡ ç§’é’Ÿ** ğŸš€

